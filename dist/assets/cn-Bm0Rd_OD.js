import{t as S,a as h}from"./index-BSg8Hp0o.js";const p="learn-progress",u="learn-notes";function a(){try{const t=localStorage.getItem(p);return t?JSON.parse(t):{}}catch{return{}}}function f(t){localStorage.setItem(p,JSON.stringify(t))}function L(t,o,s){const e=a();e[t]||(e[t]={progress:0,completedLessons:{},positions:{}}),e[t].positions[o]=s,f(e)}function y(t,o,s){const e=a();e[t]||(e[t]={progress:0,completedLessons:{},positions:{}}),e[t].completedLessons[o]=!0;const n=Object.keys(e[t].completedLessons).length;e[t].progress=Math.round(n/s*100),f(e)}function M(t,o){const s=a()[t];return s?s.progress??Math.round(Object.keys(s.completedLessons||{}).length/o*100):0}function P(t,o,s){const e=a()[t],n={},r={};o.forEach(c=>{var g,l;n[c]=((g=e==null?void 0:e.completedLessons)==null?void 0:g[c])??!1,r[c]=((l=e==null?void 0:e.positions)==null?void 0:l[c])??0});const d=Object.values(n).filter(Boolean).length;return{progress:(e==null?void 0:e.progress)??s??Math.round(d/o.length*100),completed:n,positions:r}}function i(){try{const t=localStorage.getItem(u);return t?JSON.parse(t):[]}catch{return[]}}function m(t){localStorage.setItem(u,JSON.stringify(t))}function w(t,o){return i().filter(s=>s.courseId===t&&s.lessonId===o).sort((s,e)=>s.timestamp-e.timestamp)}function E(t,o,s,e){const n=i(),r={id:`n-${Date.now()}-${Math.random().toString(36).slice(2)}`,courseId:t,lessonId:o,content:s,timestamp:e,createdAt:new Date().toISOString()};return n.push(r),m(n),r}function b(t){m(i().filter(o=>o.id!==t))}function C(...t){return S(h(t))}export{P as a,w as b,C as c,y as d,E as e,b as f,M as g,L as s};
